<!doctype html>
<meta charset="utf-8">
<title>Unsync</title>

<p>
  <input id="Start" type="button" value="Crunch some numbers">
  <span id="Working"></span>
</p>
<pre id="Results"></pre>

<script src="../dist/unsync.min.js"></script>

<script>

function crunchNumbers(x){
  var startTime = new Date();
  for(var i = 0; i < x; i++){
    Math.sqrt(Math.random() * 1000000000);
  }
  var totalTime = new Date() - startTime;
  return totalTime;
}

var crunchAsync = unsync(crunchNumbers);

document.getElementById('Start').onclick = function(){
  crunchAsync(5000000000, function(time){
    var msg = '[' + new Date() + '] Done! Time taken: ' + time + 's\n';
    document.getElementById('Results').innerHTML += msg;
  });
};

</script>